{"version":3,"sources":["components/Users/Users.module.css","components/common/Pagination/Pagination.module.css","components/common/Pagination/Pagination.jsx","components/Users/User.jsx","components/Users/Users.jsx","redux/Users/users-selectors.js","components/Users/UsersContainer.jsx"],"names":["module","exports","onPageChanged","pageNumber","pageSize","setCurrentPage","getUsers","length","pageNum","PaginationItem","currentNumber","currentPage","props","isActive","item","classes","paginationActive","className","span","onClick","PaginationControls","pagesCount","paginationControls","createPagination","pages","i","push","map","el","arr","Pagination","totalItemsCount","Math","ceil","pagination","paginationWrap","paginationNums","UserImage","img","name","userId","avatarImage","src","alt","substr","toUpperCase","FollowBtn","flag","disabled","isFollowing","some","id","user","e","preventDefault","unFollowTo","followTo","checkFollowing","followed","UserAvatar","userAvatar","photos","small","avatarButton","UserInfo","userInfo","infoName","infoStatus","status","User","to","followBtnMobile","Users","usersWrap","Preloader","isFetching","users","getUsersState","state","usersPage","getPageSizeState","getTotalUsersCountState","totalUsersCount","getCurrentPageState","getIsFetchingState","getIsFollowingState","mapDispatchToProps","compose","connect","useEffect"],"mappings":"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","file":"static/js/9.50eeba45.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"usersWrap\":\"Users_usersWrap__11nIg\",\"user\":\"Users_user__3whfn\",\"userInfo\":\"Users_userInfo__2-EgX\",\"userAvatar\":\"Users_userAvatar__1CbXz\",\"avatarImage\":\"Users_avatarImage__gp2wo\",\"avatarButton\":\"Users_avatarButton__2wSD1\",\"infoName\":\"Users_infoName__4GYAr\",\"infoStatus\":\"Users_infoStatus__15PYZ\",\"followBtnMobile\":\"Users_followBtnMobile__1wqAQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pagination\":\"Pagination_pagination__3uIT7\",\"paginationWrap\":\"Pagination_paginationWrap__249aI\",\"paginationNums\":\"Pagination_paginationNums__8Ff0N\",\"span\":\"Pagination_span__kIaaL\",\"paginationActive\":\"Pagination_paginationActive__PmZwI\",\"paginationControls\":\"Pagination_paginationControls__33-q-\"};","import React from 'react';\r\nimport classes from './Pagination.module.css';\r\n\r\nconst onPageChanged = (pageNumber, pageSize, setCurrentPage, getUsers, length = null) => {\r\n    let pageNum = pageNumber < 1 ? 1 : pageNumber;\r\n\r\n    if (length && pageNum > length) {\r\n        pageNum = length;\r\n    }\r\n\r\n    setCurrentPage(pageNum);\r\n    getUsers(pageNum, pageSize);\r\n}\r\n\r\nconst PaginationItem = ({currentNumber, currentPage, pageSize, ...props}) => {\r\n    const isActive = currentPage === currentNumber || (typeof props.item === \"number\" && currentPage === props.item)\r\n        ? classes.paginationActive : \"\";\r\n\r\n    let className = isActive ? `${isActive} ${classes.span}` : classes.span;\r\n\r\n    return <span onClick={() => onPageChanged(currentNumber, pageSize, props.setCurrentPage, props.getUsers)}\r\n                 className={className} key={currentNumber}>\r\n        {props.item ? props.item : currentNumber}\r\n    </span>;\r\n}\r\n\r\nconst PaginationControls = props => {\r\n    const {pagesCount, getUsers, setCurrentPage, pageSize, currentPage} = props;\r\n\r\n    return (\r\n        <div className={classes.paginationControls}>\r\n            <span className={classes.span}\r\n                  onClick={() => onPageChanged(currentPage - 1, pageSize, setCurrentPage, getUsers)}>\r\n                {'<'}\r\n            </span>\r\n            <span className={classes.span}>\r\n                {currentPage}\r\n            </span>\r\n            <span className={classes.span}\r\n                  onClick={() => onPageChanged(currentPage + 1, pageSize, setCurrentPage, getUsers, pagesCount)}>\r\n                {'>'}\r\n            </span>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst createPagination = (pageSize, currentPage, setCurrentPage, getUsers, pagesCount) => {\r\n    const pages = [];\r\n\r\n    for (let i = 1; i <= pagesCount; i++) {\r\n        pages.push(i); // Массив с числами для пагинатора\r\n    }\r\n\r\n    let pagination; // Пагинатор\r\n\r\n    if (pages.length > 6) {\r\n        pagination = pages.map((el, i, arr) => {\r\n\r\n            /* Если перебираемое число входит в первые или в последние три\r\n            * возвращаем элемент с числом */\r\n            if ((el >= 1 && el <= 3) || (el > arr.length - 3 && el <= arr.length)) {\r\n                return <PaginationItem currentNumber={el} currentPage={currentPage} pageSize={pageSize}\r\n                                       setCurrentPage={setCurrentPage} getUsers={getUsers}/>\r\n            }\r\n        })\r\n    } else {\r\n        pagination = pages.map(el => {\r\n            return <PaginationItem currentNumber={el} currentPage={currentPage} pageSize={pageSize}\r\n                                   setCurrentPage={setCurrentPage} getUsers={getUsers}/>\r\n        })\r\n    }\r\n\r\n    return pagination;\r\n}\r\n\r\nconst Pagination = props => {\r\n    const {totalItemsCount, pageSize, currentPage, setCurrentPage, getUsers} = props;\r\n    const pagesCount = Math.ceil(totalItemsCount / pageSize); // Количество страниц\r\n\r\n    return <div className={classes.pagination}>\r\n        <div className={classes.paginationWrap}>\r\n            <div className={classes.paginationNums}>\r\n                {createPagination(pageSize, currentPage, setCurrentPage, getUsers, pagesCount)}\r\n            </div>\r\n            <PaginationControls currentPage={currentPage} pageSize={pageSize} setCurrentPage={setCurrentPage}\r\n                                getUsers={getUsers} pagesCount={pagesCount}/>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default Pagination;\r\n","import React from 'react';\r\nimport classes from './Users.module.css';\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\nconst UserImage = ({img, name, userId}) =>\r\n    <div className={classes.avatarImage}>\r\n        {img\r\n            ? <img src={img} alt=\"avatar\"/>\r\n            : name.substr(0, 1).toUpperCase()}\r\n    </div>\r\n\r\nconst FollowBtn = props => {\r\n    const followBtn = flag => flag ? \"Unfollow\" : \"Follow\";\r\n\r\n    const checkFollowing = (flag, id, e) => {\r\n        e.preventDefault();\r\n        return flag ? props.unFollowTo(id) : props.followTo(id);\r\n    };\r\n\r\n    return <button disabled={props.isFollowing.some(id => id === props.user.id)}\r\n                   className={`${props.className}`}\r\n                   onClick={e => checkFollowing(props.user.followed, props.user.id, e)}>\r\n        {followBtn(props.user.followed)}\r\n    </button>\r\n}\r\n\r\nconst UserAvatar = props =>\r\n    <div className={classes.userAvatar}>\r\n        <UserImage img={props.user.photos.small} name={props.user.name} userId={props.user.id}/>\r\n        <FollowBtn {...props} className={classes.avatarButton}/>\r\n    </div>\r\n\r\nconst UserInfo = ({user}) =>\r\n    <div className={classes.userInfo}>\r\n        <div className={classes.infoName}>{user.name}</div>\r\n        <div className={classes.infoStatus}>{user.status}</div>\r\n    </div>\r\n\r\nconst User = props =>\r\n    <NavLink to={`/profile/${props.user.id}`} className={classes.user}>\r\n        <UserAvatar user={props.user} unFollowTo={props.unFollowTo} followTo={props.followTo}\r\n                    isFollowing={props.isFollowing}/>\r\n        <UserInfo user={props.user}/>\r\n        <FollowBtn className={classes.followBtnMobile} {...props} />\r\n    </NavLink>\r\n\r\nexport default User;\r\n","import React from 'react';\r\nimport classes from './Users.module.css';\r\nimport Pagination from \"../common/Pagination/Pagination\";\r\nimport Preloader from \"../common/Preloader/Preloader\";\r\nimport User from \"./User\";\r\n\r\nconst Users = props => {\r\n\r\n    return <div className={`${classes.usersWrap} component--wrap`}>\r\n        <Preloader flag={props.isFetching}/>\r\n\r\n        {props.users.map(el => <User key={el.id} user={el} {...props}/>)}\r\n\r\n        <Pagination {...props}/>\r\n    </div>\r\n}\r\n\r\nexport default Users;\r\n","export const getUsersState = state => {\r\n    return state.usersPage.users\r\n}\r\n\r\nexport const getPageSizeState = state => {\r\n    return state.usersPage.pageSize\r\n}\r\n\r\nexport const getTotalUsersCountState = state => {\r\n    return state.usersPage.totalUsersCount\r\n}\r\n\r\nexport const getCurrentPageState = state => {\r\n    return state.usersPage.currentPage\r\n}\r\n\r\nexport const getIsFetchingState = state => {\r\n    return state.usersPage.isFetching\r\n}\r\n\r\nexport const getIsFollowingState = state => {\r\n    return state.usersPage.isFollowing\r\n}\r\n","import React, {useEffect} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {followTo, getUsers, setCurrentPage, unFollowTo} from '../../redux/Users/users-reducer';\r\nimport Users from './Users';\r\nimport {compose} from \"redux\";\r\nimport {\r\n    getCurrentPageState, getIsFetchingState, getIsFollowingState,\r\n    getPageSizeState,\r\n    getTotalUsersCountState,\r\n    getUsersState\r\n} from \"../../redux/Users/users-selectors\";\r\n\r\nconst UsersContainer = props => {\r\n    useEffect(() => {\r\n        const {currentPage, pageSize} = props\r\n        props.getUsers(currentPage, pageSize);\r\n    }, [props.currentPage])\r\n\r\n    return <Users {...props}/>\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    users: getUsersState(state),\r\n    pageSize: getPageSizeState(state),\r\n    totalItemsCount: getTotalUsersCountState(state),\r\n    currentPage: getCurrentPageState(state),\r\n    isFetching: getIsFetchingState(state),\r\n    isFollowing: getIsFollowingState(state)\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    setCurrentPage,\r\n    getUsers,\r\n    unFollowTo,\r\n    followTo\r\n};\r\n\r\nexport default compose(\r\n    connect(mapStateToProps, mapDispatchToProps)\r\n)(UsersContainer);\r\n"],"sourceRoot":""}