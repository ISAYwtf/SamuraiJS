{"version":3,"sources":["redux/App/app-reducer.js","redux/Sidebar/sidebar-reducer.js","redux/redux-store.js","logo.svg","components/Header/Header.jsx","components/Header/HeaderContainer.jsx","hoc/withSuspense.jsx","components/Music/Music.jsx","components/Settings/Settings.jsx","components/Content/Content.jsx","components/Content/index.js","components/Navbar/Navbar.jsx","components/Sidebar/Sidebar.jsx","components/Body/index.js","components/Body/Body.jsx","redux/App/app-selectors.js","components/common/Alert/Alert.jsx","App.js","index.js","components/Header/Header.module.css","redux/Auth/auth-reducer.js","components/common/Preloader/Preloader.jsx","redux/Auth/auth-selectors.js","components/common/Preloader/Preloader.module.css","components/common/Alert/Alert.module.css","components/common/Button/Button.jsx","components/common/Button/index.js","redux/Profile/profile-reducer.js","redux/Dialogs/dialogs-reducer.js","utils/object-helpers.js","redux/Users/users-reducer.js","api/api.js","components/common/Button/Button.module.css","components/Body/Body.module.css","components/Content/Content.module.css","components/Sidebar/Sidebar.module.css"],"names":["INITIALIZED_SUCCESS","HAS_ERROR","initialState","initialized","errorData","hasError","errorMessage","toggleHasError","type","payload","initializeApp","dispatch","getMe","Promise","all","then","appReducer","state","action","friends","id","img","sidebarReducer","reducers","combineReducers","profilePage","profileReducer","dialogsPage","dialogsReducer","sidebar","usersPage","usersReducer","auth","authReducer","form","formReducer","app","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleware","Header","isAuth","login","logout","className","classes","header","to","logo","src","alt","loginUser","loginInfo","Button","attr","HeaderContainer","render","props","React","Component","mapDispatchToProps","connect","getIsAuth","getAuthLogin","withSuspense","fallback","Preloader","flag","Music","Settings","MessagesContainer","lazy","ProfileContainer","Login","UsersContainer","Content","content","path","exact","Navbar","activeClassName","DialogsContainer","Search","Sidebar","Body","body","getAppInitialized","getAppErrorData","alert","onClick","message","children","AppContainer","withRouter","useEffect","SamuraiJSApp","ReactDOM","document","getElementById","module","exports","SET_USER_DATA","GET_CAPTCHA_URL_SUCCESS","userId","email","captchaUrl","setUserData","getCaptchaUrlSuccess","a","authAPI","data","resultCode","password","rememberMe","captcha","reset","getCaptcha","messages","length","stopSubmit","_error","securityAPI","getCaptchaUrl","url","preloaderWrap","preloaderPulse","getAuthorizedId","getAuthCaptcha","button","ADD_POST","DELETE_POST","SET_USER_PROFILE","SET_STATUS","SET_FULLNAME","SET_PHOTO","TOGGLE_IS_FETCHING","posts","post","likesCount","status","profile","isFetching","setStatus","toggleIsFetching","addPostTC","newPost","addPost","getProfile","usersAPI","response","msg","getUserStatus","profileAPI","getStatus","updateStatus","savePhoto","file","photos","updateProfile","getState","reject","filter","el","fullName","SEND_MESSAGE","dialogs","name","mine","sendMessageTC","sendMessage","newMessage","updateObjectInArray","items","itemId","objPropName","newObjProps","map","FOLLOW","UNFOLLOW","SET_USERS","SET_CURRENT_PAGE","SET_TOTAL_COUNT","TOGGLE_IS_FOLLOWING","users","pageSize","totalUsersCount","currentPage","isFollowing","follow","unFollow","setCurrentPage","toggleIsFollowing","getUsers","page","totalCount","followUnfollowFlow","apiMethod","actionCreator","unFollowTo","bind","followTo","followed","server","axios","withCredentials","headers","baseURL","get","delete","put","formData","FormData","append"],"mappings":"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","file":"static/js/main.1c80f8b7.chunk.js","sourcesContent":["import {getMe} from \"../Auth/auth-reducer\";\r\n\r\nconst INITIALIZED_SUCCESS = 'INITIALIZED-SUCCESS';\r\nconst HAS_ERROR = 'HAS-ERROR';\r\n\r\nconst initialState = {\r\n    initialized: false,\r\n    errorData: {\r\n        hasError: false,\r\n        errorMessage: null\r\n    }\r\n};\r\n\r\nconst appReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case INITIALIZED_SUCCESS:\r\n            return {\r\n                ...state,\r\n                initialized: true,\r\n            }\r\n        case HAS_ERROR:\r\n            return {\r\n                ...state,\r\n                errorData: {...action.payload}\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const initializedSuccess = () => ({type: INITIALIZED_SUCCESS});\r\nexport const toggleHasError = (errorData = [false, null]) => ({\r\n    type: HAS_ERROR,\r\n    payload: {hasError: errorData[0], errorMessage: errorData[1]}\r\n});\r\n\r\nexport const initializeApp = () => dispatch => {\r\n    const initialized = dispatch(getMe());\r\n\r\n    Promise.all([initialized])\r\n        .then(() => {\r\n            dispatch(initializedSuccess());\r\n        });\r\n}\r\n\r\nexport default appReducer;\r\n","const initialState = {\r\n    friends: [\r\n        {id: 1, img: 'https://s0.rbk.ru/v6_top_pics/media/img/8/22/755895443908228.jpg'},\r\n        {\r\n            id: 2,\r\n            img: 'https://www.moya-planeta.ru/upload/images/xl/19/a7/19a713c5edb6c69c5a0c31b875d732b3.jpg'\r\n        },\r\n        {id: 3, img: 'https://brammels.com/wp-content/uploads/2018/06/krasivye-lyudi-umnee.jpg'},\r\n        {id: 4, img: 'https://www.kino-teatr.ru/art/5823/82736.jpg'}\r\n    ]\r\n};\r\n\r\nconst sidebarReducer = (state = initialState, action) => {\r\n\r\n    return state;\r\n}\r\n\r\nexport default sidebarReducer;\r\n","import {applyMiddleware, combineReducers, compose, createStore} from \"redux\";\r\nimport profileReducer from \"./Profile/profile-reducer\";\r\nimport dialogsReducer from \"./Dialogs/dialogs-reducer\";\r\nimport sidebarReducer from \"./Sidebar/sidebar-reducer\";\r\nimport usersReducer from \"./Users/users-reducer\";\r\nimport authReducer from \"./Auth/auth-reducer\";\r\nimport thunkMiddleware from \"redux-thunk\";\r\nimport {reducer as formReducer} from \"redux-form\";\r\nimport appReducer from \"./App/app-reducer\";\r\n\r\nlet reducers = combineReducers({\r\n    profilePage: profileReducer,\r\n    dialogsPage: dialogsReducer,\r\n    sidebar: sidebarReducer,\r\n    usersPage: usersReducer,\r\n    auth: authReducer,\r\n    form: formReducer,\r\n    app: appReducer\r\n});\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(reducers, composeEnhancers(applyMiddleware(thunkMiddleware)));\r\n\r\n// const store = createStore(reducers, applyMiddleware(thunkMiddleware));\r\n\r\nexport default store;\r\n","export default __webpack_public_path__ + \"static/media/logo.05eddaf0.svg\";","import React from \"react\";\r\nimport classes from './Header.module.css';\r\nimport {NavLink} from \"react-router-dom\";\r\nimport Button from \"../common/Button\";\r\nimport logo from \"./../../logo.svg\";\r\n\r\nconst Header = ({isAuth, login, logout}) => {\r\n    return (\r\n        <header className={`${classes.header} component`}>\r\n            <NavLink to={\"/profile\"} className={classes.logo}>\r\n                <img src={logo} alt=\"logo\"/>\r\n            </NavLink>\r\n            <div className={classes.login}>\r\n                {isAuth\r\n                    ? <div className={classes.loginUser}>\r\n                        <NavLink to={\"/profile\"} className={classes.loginInfo}>{login}</NavLink>\r\n                        <Button attr={{\"onClick\": logout}}>Log Out</Button>\r\n                    </div>\r\n                    : <NavLink className={classes.loginInfo} to={`/login`}>Login</NavLink>\r\n                }\r\n            </div>\r\n        </header>\r\n    )\r\n}\r\n\r\nexport default Header;\r\n","import React from \"react\";\r\nimport Header from \"./Header\";\r\nimport {connect} from \"react-redux\";\r\nimport {logout} from \"../../redux/Auth/auth-reducer\";\r\nimport {getIsAuth, getAuthLogin} from \"../../redux/Auth/auth-selectors\";\r\n\r\nclass HeaderContainer extends React.Component {\r\n    render = () => <Header {...this.props} />\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    isAuth: getIsAuth(state),\r\n    login: getAuthLogin(state)\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    logout\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(HeaderContainer);\r\n","import React, {Suspense} from 'react';\r\nimport Preloader from \"../components/common/Preloader/Preloader\";\r\n\r\nexport const withSuspense = Component =>\r\n    props =>\r\n        <Suspense fallback={<Preloader flag={Component}/>}>\r\n            <Component {...props} />\r\n        </Suspense>\r\n","import React from 'react';\r\n\r\nconst Music = () => {\r\n    return (\r\n        <div>\r\n            Music\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Music;\r\n","import React from 'react';\r\n\r\nconst Settings = () => {\r\n    return (\r\n        <div>\r\n            Settings\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Settings;\r\n","import React from \"react\";\r\nimport {Redirect, Route, Switch} from \"react-router-dom\";\r\nimport {withSuspense} from \"../../hoc/withSuspense\";\r\nimport Music from \"../Music/Music\";\r\nimport Settings from \"../Settings/Settings\";\r\nimport classes from \"./Content.module.css\";\r\n\r\nconst MessagesContainer = React.lazy(() => import('../Messages/MessagesContainer'));\r\nconst ProfileContainer = React.lazy(() => import('./../Profile/ProfileContainer'));\r\nconst Login = React.lazy(() => import('./../Login/Login'));\r\nconst UsersContainer = React.lazy(() => import('../Users/UsersContainer'));\r\n\r\nconst Content = props => {\r\n    return (\r\n        <div className={`${classes.content} component`}>\r\n            <Switch>\r\n                <Route path={`/`} exact\r\n                       render={() => <Redirect to={\"/profile\"}/>}/>\r\n                <Route path={`/profile/:userId?`}\r\n                       render={withSuspense(ProfileContainer)}/>\r\n                <Route path={`/dialogs`}\r\n                       render={withSuspense(MessagesContainer)}/>\r\n                <Route path={`/users`} render={withSuspense(UsersContainer)}/>\r\n                <Route path={`/music`} render={() => <Music/>}/>\r\n                <Route path={`/settings`} render={() => <Settings/>}/>\r\n                <Route path={`/login`} render={withSuspense(Login)}/>\r\n                <Route path={\"*\"} render={() => <div>404 NOT FOUND</div>}/>\r\n            </Switch>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Content;\r\n","import Content from \"./Content\";\r\n\r\nexport default Content;\r\n","import React from \"react\";\r\nimport classes from './Navbar.module.css';\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\n// import FriendsList from \"./FriendsList/FriendsList\";\r\n// import {connect} from \"react-redux\";\r\n// import {getSidebarFriends} from \"../../redux/Sidebar/sidebar-selectors\";\r\n\r\n// const mapStateToProps = (state) => ({\r\n//     friends: getSidebarFriends(state)\r\n// })\r\n\r\n// const FriendsListContainer = connect(mapStateToProps)(FriendsList);\r\n\r\nconst Navbar = () =>\r\n    <nav className={`component component--sidebar`}>\r\n        <NavLink to={`/profile`} activeClassName={`sidebar--item--active`} className={`sidebar--item`}>\r\n            Profile\r\n        </NavLink>\r\n        <NavLink to={`/dialogs`} activeClassName={`sidebar--item--active`} className={`sidebar--item`}>\r\n            Messages\r\n        </NavLink>\r\n        <NavLink to={`/users`} activeClassName={`sidebar--item--active`} className={`sidebar--item`}>\r\n            Users\r\n        </NavLink>\r\n        <NavLink to={`/music`} activeClassName={`sidebar--item--active`} className={`sidebar--item`}>\r\n            Music\r\n        </NavLink>\r\n        <NavLink to={`/settings`} activeClassName={`sidebar--item--active`} className={`sidebar--item`}>\r\n            Settings\r\n        </NavLink>\r\n        {/*<FriendsListContainer />*/}\r\n    </nav>\r\n\r\nexport default Navbar;\r\n","import React from \"react\";\r\nimport Navbar from \"../Navbar/Navbar\";\r\nimport classes from \"./Sidebar.module.css\";\r\nimport {Route} from \"react-router-dom\";\r\nimport {withSuspense} from \"../../hoc/withSuspense\";\r\n\r\nconst DialogsContainer = React.lazy(() => import('../Dialogs/DialogsContainer'));\r\nconst Search = React.lazy(() => import('../Search/Search'));\r\n\r\nconst Sidebar = () =>\r\n    <div className={classes.sidebar}>\r\n        <Navbar/>\r\n        <div><Route path={'/dialogs'} render={withSuspense(DialogsContainer)}/></div>\r\n        <div><Route path={'/users'} render={withSuspense(Search)}/></div>\r\n    </div>\r\n\r\nexport default Sidebar;\r\n","import Body from \"./Body\";\r\n\r\nexport default Body;\r\n","import React from \"react\";\r\nimport classes from \"./Body.module.css\";\r\nimport Content from \"../Content\";\r\nimport Sidebar from \"../Sidebar/Sidebar\";\r\n\r\nconst Body = props => {\r\n    return (\r\n        <div className={classes.body}>\r\n            <Sidebar/>\r\n            <Content/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Body;\r\n","export const getAppInitialized = state => state.app.initialized\r\nexport const getAppErrorData = state => state.app.errorData\r\n","import React from \"react\";\r\nimport classes from \"./Alert.module.css\";\r\nimport {connect} from \"react-redux\";\r\nimport {toggleHasError} from \"../../../redux/App/app-reducer\";\r\n\r\nconst Alert = props => {\r\n    const resetError = () => {\r\n        props.toggleHasError();\r\n    }\r\n\r\n    return <div className={classes.alert} onClick={resetError}>\r\n        <div className={classes.message}>\r\n            {props.children}\r\n        </div>\r\n    </div>\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    toggleHasError\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(Alert);\r\n","import React, {useEffect} from \"react\";\r\nimport {BrowserRouter, HashRouter, withRouter} from \"react-router-dom\";\r\nimport {compose} from \"redux\";\r\nimport {connect, Provider} from \"react-redux\";\r\nimport './App.css';\r\nimport store from \"./redux/redux-store\";\r\nimport {toggleHasError, initializeApp} from \"./redux/App/app-reducer\";\r\nimport Preloader from \"./components/common/Preloader/Preloader\";\r\nimport HeaderContainer from \"./components/Header/HeaderContainer\";\r\nimport Body from \"./components/Body\";\r\nimport {getAppErrorData, getAppInitialized} from \"./redux/App/app-selectors\";\r\nimport Alert from \"./components/common/Alert/Alert\";\r\n\r\nconst App = props => {\r\n    useEffect(() => {\r\n        props.initializeApp();\r\n    })\r\n\r\n    if (!props.initialized) return <Preloader/>\r\n\r\n    return <div className='app-wrapper'>\r\n        <HeaderContainer/>\r\n        <Body/>\r\n\r\n        {props.errorData.hasError ? <Alert>{props.errorData.errorMessage}</Alert> : \"\"}\r\n    </div>\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    initialized: getAppInitialized(state),\r\n    errorData: getAppErrorData(state)\r\n})\r\nconst mapDispatchToProps = {initializeApp, toggleHasError}\r\n\r\nconst AppContainer = compose(\r\n    withRouter,\r\n    connect(mapStateToProps, mapDispatchToProps)\r\n)(App);\r\n\r\nconst SamuraiJSApp = () =>\r\n    <HashRouter>\r\n        <Provider store={store}>\r\n            <AppContainer/>\r\n        </Provider>\r\n    </HashRouter>\r\n\r\nexport default SamuraiJSApp;\r\n","import React from 'react';\r\nimport './index.css';\r\nimport ReactDOM from \"react-dom\";\r\nimport SamuraiJSApp from \"./App\";\r\n\r\nReactDOM.render(\r\n    <SamuraiJSApp/>,\r\n    document.getElementById('root')\r\n);\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__2gpML\",\"logo\":\"Header_logo__2P5Uz\",\"login\":\"Header_login__37Er4\",\"loginUser\":\"Header_loginUser__3w0Cd\",\"loginInfo\":\"Header_loginInfo__1DXwF\"};","import {authAPI, securityAPI} from \"../../api/api\";\r\nimport {reset, stopSubmit} from \"redux-form\";\r\n\r\nconst SET_USER_DATA = 'samurai-network/auth/SET-USER-DATA';\r\nconst GET_CAPTCHA_URL_SUCCESS = 'samurai-network/auth/GET-CAPTCHA-URL-SUCCESS';\r\n\r\nconst initialState = {\r\n    userId: null,\r\n    email: null,\r\n    login: null,\r\n    isAuth: false,\r\n    captchaUrl: null // if null, then captcha is not required\r\n};\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case SET_USER_DATA:\r\n            return {\r\n                ...state,\r\n                ...action.payload,\r\n            }\r\n        case GET_CAPTCHA_URL_SUCCESS:\r\n            return {\r\n                ...state,\r\n                ...action.payload,\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const setUserData = (userId, email, login, isAuth) => ({\r\n    type: SET_USER_DATA,\r\n    payload: {userId, email, login, isAuth}\r\n});\r\n\r\nexport const getCaptchaUrlSuccess = (captchaUrl) => ({\r\n    type: GET_CAPTCHA_URL_SUCCESS,\r\n    payload: {captchaUrl}\r\n});\r\n\r\nexport const getMe = () => async dispatch => {\r\n    const data = await authAPI.getMe();\r\n\r\n    if (data.resultCode === 0) {\r\n        let {id, login, email} = data.data;\r\n        dispatch(setUserData(id, email, login, true));\r\n    }\r\n}\r\n\r\nexport const login = (email, password, rememberMe, captcha = null) => async dispatch => {\r\n    const data = await authAPI.login(email, password, rememberMe, captcha);\r\n\r\n    if (data.resultCode === 0) {\r\n        dispatch(getMe());\r\n        dispatch(reset('login'));\r\n    } else {\r\n        if (data.resultCode === 10) {\r\n            dispatch(reset('login'));\r\n            dispatch(getCaptcha());\r\n        }\r\n        let message = data.messages.length > 0 ? data.messages[0] : \"Email or password are incorrect.\";\r\n        dispatch(stopSubmit('login', {_error: message}));\r\n    }\r\n}\r\n\r\nexport const getCaptcha = () => async dispatch => {\r\n    const data = await securityAPI.getCaptchaUrl();\r\n\r\n    const captchaUrl = data.url;\r\n\r\n    dispatch(getCaptchaUrlSuccess(captchaUrl));\r\n}\r\n\r\nexport const logout = () => async dispatch => {\r\n    const data = await authAPI.logout()\r\n\r\n    if (data.resultCode === 0) {\r\n        dispatch(setUserData(null, null, null, false));\r\n    }\r\n}\r\n\r\nexport default authReducer;\r\n","import React from 'react';\r\nimport classes from \"./Preloader.module.css\";\r\n\r\nconst Preloader = ({flag = true}) => {\r\n    if (!flag) return \"\";\r\n\r\n    return <section className={classes.preloaderWrap}>\r\n        <div className={classes.preloaderPulse}/>\r\n    </section>\r\n}\r\n\r\nexport default Preloader;\r\n","export const getAuthorizedId = state => state.auth.userId\r\nexport const getIsAuth = state => state.auth.isAuth\r\nexport const getAuthLogin = state => state.auth.login\r\nexport const getAuthCaptcha = state => state.auth.captchaUrl\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"preloaderWrap\":\"Preloader_preloaderWrap__3ydVF\",\"preloaderPulse\":\"Preloader_preloaderPulse__3Q7Dq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"alert\":\"Alert_alert__3F7Uc\",\"message\":\"Alert_message__xFDTQ\"};","import React from \"react\";\r\nimport classes from \"./Button.module.css\";\r\n\r\nconst Button = props => {\r\n    let {className, attr} = props;\r\n\r\n    className = className ? className : \"\";\r\n\r\n    return <button {...attr} className={`${classes.button} ${className}`}>{props.children}</button>\r\n}\r\n\r\nexport default Button;\r\n","import Button from \"./Button\";\r\n\r\nexport default Button;\r\n","import {profileAPI, usersAPI} from \"../../api/api\";\r\nimport {reset, stopSubmit} from \"redux-form\";\r\nimport {toggleHasError} from \"../App/app-reducer\";\r\n\r\nconst ADD_POST = 'samurai-network/profile/ADD-POST';\r\nconst DELETE_POST = 'samurai-network/profile/DELETE-POST';\r\nconst SET_USER_PROFILE = 'samurai-network/profile/SET-USER-PROFILE';\r\nconst SET_STATUS = 'samurai-network/profile/SET-STATUS';\r\nconst SET_FULLNAME = 'samurai-network/profile/SET-FULLNAME';\r\nconst SET_PHOTO = 'samurai-network/profile/SET-PHOTO';\r\nconst TOGGLE_IS_FETCHING = 'samurai-network/profile/TOGGLE-IS-FETCHING';\r\n\r\nconst initialState = {\r\n    posts: [\r\n        {id: 1, post: 'Hi how are you', likesCount: 15},\r\n    ],\r\n    status: null,\r\n    profile: null,\r\n    isFetching: false\r\n};\r\n\r\nconst profileReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n        case ADD_POST:\r\n            const newPost = {\r\n                id: 3,\r\n                post: action.newPost,\r\n                likesCount: 1\r\n            };\r\n            return {\r\n                ...state,\r\n                posts: [...state.posts, {...newPost}],\r\n            };\r\n        case DELETE_POST:\r\n            return {\r\n                ...state,\r\n                posts: state.posts.filter(el => el.id !== action.post),\r\n            };\r\n        case SET_USER_PROFILE:\r\n            return {\r\n                ...state,\r\n                profile: action.profile\r\n            };\r\n        case SET_STATUS:\r\n            return {\r\n                ...state,\r\n                status: action.status\r\n            };\r\n        case SET_FULLNAME:\r\n            return {\r\n                ...state,\r\n                fullName: action.fullName\r\n            };\r\n        case SET_PHOTO:\r\n            return {\r\n                ...state,\r\n                profile: {...state.profile, photos: action.photos}\r\n            };\r\n        case TOGGLE_IS_FETCHING:\r\n            return {\r\n                ...state,\r\n                isFetching: action.isFetching\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const addPost = newPost => ({type: ADD_POST, newPost});\r\nexport const deletePost = post => ({type: DELETE_POST, post});\r\nexport const setUserProfile = profile => ({type: SET_USER_PROFILE, profile});\r\nexport const setStatus = status => ({type: SET_STATUS, status});\r\nexport const setFullName = fullName => ({type: SET_FULLNAME, fullName});\r\nexport const savePhotoSuccess = photos => ({type: SET_PHOTO, photos});\r\nexport const toggleIsFetching = isFetching => ({type: TOGGLE_IS_FETCHING, isFetching});\r\n\r\nexport const addPostTC = newPost => dispatch => {\r\n    dispatch(addPost(newPost));\r\n    dispatch(reset('postForm'));\r\n}\r\n\r\nexport const getProfile = userId => async dispatch => {\r\n    try {\r\n        const response = await usersAPI.getProfile(userId);\r\n        dispatch(setUserProfile(response.data));\r\n    } catch (e) {\r\n        let msg = e.response.data.message;\r\n        if (e.response.status >= 400 && e.response.status <= 500) {\r\n            msg = \"User is not exist\";\r\n        }\r\n        dispatch(toggleHasError([true, msg]));\r\n    }\r\n};\r\n\r\nexport const getUserStatus = userId => async dispatch => {\r\n    const data = await profileAPI.getStatus(userId);\r\n    dispatch(setStatus(data));\r\n};\r\n\r\nexport const updateStatus = status => async dispatch => {\r\n    try {\r\n        const data = await profileAPI.updateStatus(status);\r\n\r\n        if (data.resultCode === 0) {\r\n            dispatch(setStatus(status));\r\n        }\r\n    } catch (e) {\r\n\r\n    }\r\n\r\n};\r\n\r\nexport const savePhoto = file => async dispatch => {\r\n    const data = await profileAPI.savePhoto(file);\r\n\r\n    if (data.resultCode === 0) {\r\n        dispatch(savePhotoSuccess(data.data.photos));\r\n    }\r\n};\r\n\r\nexport const updateProfile = (profile) => async (dispatch, getState) => {\r\n    const userId = getState().auth.userId;\r\n    const data = await profileAPI.updateProfile(profile);\r\n\r\n    if (data.resultCode === 0) {\r\n        dispatch(getProfile(userId));\r\n    } else {\r\n        dispatch(stopSubmit(\"editProfile\", {_error: data.messages[0]}));\r\n        return Promise.reject(data.messages[0]);\r\n    }\r\n};\r\n\r\nexport default profileReducer;\r\n","import {reset} from \"redux-form\";\r\n\r\nconst SEND_MESSAGE = 'SEND-MESSAGE';\r\n\r\nconst initialState = {\r\n    dialogs: [\r\n        {id: 1, name: 'Dmitriy'},\r\n        {id: 2, name: 'Andrey'},\r\n        {id: 3, name: 'Svetlana'},\r\n        {id: 4, name: 'Sasha'},\r\n        {id: 5, name: 'Viktor'},\r\n        {id: 6, name: 'Valeriy'},\r\n    ],\r\n    messages: [\r\n        {id: 1, message: 'Hi', mine: false},\r\n        {id: 2, message: 'How are you', mine: false},\r\n        {id: 3, message: 'Yo', mine: false},\r\n        {id: 4, message: 'Yo', mine: true},\r\n        {id: 5, message: 'My friend', mine: true},\r\n        {id: 6, message: `It's a new cool chat, dude!`, mine: true},\r\n    ],\r\n};\r\n\r\nconst dialogsReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n        case SEND_MESSAGE:\r\n            const newMessage = {\r\n                id: 7,\r\n                message: action.message,\r\n                mine: true\r\n            };\r\n\r\n            return {\r\n                ...state,\r\n                messages: [...state.messages, {...newMessage}],\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const sendMessage = message => ({type: SEND_MESSAGE, message});\r\n\r\nexport const sendMessageTC = message => dispatch => {\r\n    dispatch(sendMessage(message));\r\n    dispatch(reset(\"dialogAddMessageForm\"));\r\n}\r\n\r\nexport default dialogsReducer;\r\n","export const updateObjectInArray = (items, itemId, objPropName, newObjProps) => {\r\n    return items.map(el => {\r\n        if (el[objPropName] === itemId) {\r\n            return {...el, ...newObjProps}\r\n        }\r\n        return el;\r\n    })\r\n}\r\n","import {usersAPI} from \"../../api/api\";\r\nimport {updateObjectInArray} from \"../../utils/object-helpers\";\r\n\r\nconst FOLLOW = 'samurai-network/users/FOLLOW';\r\nconst UNFOLLOW = 'samurai-network/users/UNFOLLOW';\r\nconst SET_USERS = 'samurai-network/users/SET-USERS';\r\nconst SET_CURRENT_PAGE = 'samurai-network/users/SET-CURRENT-PAGE';\r\nconst SET_TOTAL_COUNT = 'samurai-network/users/SET-TOTAL-COUNT';\r\nconst TOGGLE_IS_FETCHING = 'samurai-network/users/TOGGLE-IS-FETCHING';\r\nconst TOGGLE_IS_FOLLOWING = 'samurai-network/users/TOGGLE-IS-FOLLOWING';\r\n\r\nconst initialState = {\r\n    users: [],\r\n    pageSize: 7,\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    isFetching: false,\r\n    isFollowing: []\r\n};\r\n\r\nconst usersReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case FOLLOW:\r\n            return {\r\n                ...state,\r\n                users: updateObjectInArray(state.users, action.userId, \"id\", {followed: true})\r\n            }\r\n        case UNFOLLOW:\r\n            return {\r\n                ...state,\r\n                users: updateObjectInArray(state.users, action.userId, \"id\", {followed: false})\r\n            }\r\n        case SET_USERS:\r\n            return {...state, users: action.users};\r\n        case SET_CURRENT_PAGE:\r\n            return {...state, currentPage: action.currentPage}\r\n        case SET_TOTAL_COUNT:\r\n            return {...state, totalUsersCount: action.totalCount}\r\n        case TOGGLE_IS_FETCHING:\r\n            return {...state, isFetching: action.isFetching}\r\n        case TOGGLE_IS_FOLLOWING:\r\n            return {\r\n                ...state, isFollowing: action.isFollowing\r\n                    ? [...state.isFollowing, action.userId]\r\n                    : state.isFollowing.filter(id => id !== action.userId)\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const follow = userId => ({type: FOLLOW, userId});\r\nexport const unFollow = userId => ({type: UNFOLLOW, userId});\r\nexport const setUsers = users => ({type: SET_USERS, users});\r\nexport const setCurrentPage = currentPage => ({type: SET_CURRENT_PAGE, currentPage});\r\nexport const setTotalUsersCount = totalCount => ({type: SET_TOTAL_COUNT, totalCount});\r\nexport const toggleIsFetching = isFetching => ({type: TOGGLE_IS_FETCHING, isFetching});\r\nexport const toggleIsFollowing = (isFollowing, userId) => ({type: TOGGLE_IS_FOLLOWING, isFollowing, userId});\r\n\r\nexport const getUsers = (page, pageSize) => async dispatch => {\r\n    dispatch(toggleIsFetching(true));\r\n    dispatch(setCurrentPage(page));\r\n\r\n    const data = await usersAPI.getUsers(page, pageSize)\r\n\r\n    dispatch(toggleIsFetching(false));\r\n    dispatch(setUsers(data.items));\r\n    dispatch(setTotalUsersCount(data.totalCount));\r\n}\r\n\r\nconst followUnfollowFlow = async (dispatch, userId, apiMethod, actionCreator) => {\r\n    dispatch(toggleIsFollowing(true));\r\n\r\n    const data = await apiMethod(userId)\r\n\r\n    if (data.resultCode === 0) {\r\n        dispatch(actionCreator(userId));\r\n    }\r\n    dispatch(toggleIsFollowing(false, userId));\r\n}\r\n\r\nexport const unFollowTo = userId => async dispatch => {\r\n    const apiMethod = usersAPI.unFollowTo.bind(usersAPI);\r\n    const actionCreator = unFollow;\r\n\r\n    await followUnfollowFlow(dispatch, userId, apiMethod, actionCreator);\r\n}\r\n\r\nexport const followTo = userId => async dispatch => {\r\n    const apiMethod = usersAPI.followTo.bind(usersAPI);\r\n    const actionCreator = follow;\r\n\r\n    await followUnfollowFlow(dispatch, userId, apiMethod, actionCreator);\r\n}\r\n\r\nexport default usersReducer;\r\n","import * as axios from \"axios\";\r\n\r\nconst server = axios.create({\r\n    withCredentials: true,\r\n    headers: {\r\n        \"API-KEY\": \"eed101de-783b-4107-bd06-6b28cf0259ec\"\r\n    },\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/'\r\n});\r\n\r\nexport const usersAPI = {\r\n    getUsers(currentPage = 1, pageSize = 5) {\r\n        return server.get(`users?page=${currentPage}&count=${pageSize}`)\r\n            .then(response => response.data);\r\n    },\r\n    followTo(id) {\r\n        return server.post(`follow/${id}`)\r\n            .then(response => response.data);\r\n    },\r\n    unFollowTo(id) {\r\n        return server.delete(`follow/${id}`)\r\n            .then(response => response.data);\r\n    },\r\n    getProfile(userId) {\r\n        return profileAPI.getProfile(userId);\r\n    }\r\n}\r\n\r\nexport const profileAPI = {\r\n    getProfile(userId) {\r\n        return server.get(`profile/${userId}`)\r\n            // .then(response => response.data);\r\n    },\r\n    getStatus(userId) {\r\n        return server.get(`profile/status/${userId}`)\r\n            .then(response => response.data);\r\n    },\r\n    updateStatus(status) {\r\n        return server.put(`profile/status`, {status})\r\n            .then(response => response.data);\r\n    },\r\n    updateProfile(profile) {\r\n        return server.put(`profile`, profile)\r\n            .then(response => response.data);\r\n    },\r\n    savePhoto(file) {\r\n        const formData = new FormData();\r\n        const headers = {\r\n            'Content-Type': 'multipart/form-data'\r\n        };\r\n\r\n        formData.append(\"image\", file);\r\n        return server.put(`profile/photo`, formData, {headers})\r\n            .then(response => response.data);\r\n    }\r\n}\r\n\r\nexport const authAPI = {\r\n    getMe() {\r\n        return server.get(`auth/me/`, {\r\n            withCredentials: true\r\n        }).then(response => response.data);\r\n    },\r\n    login(email, password, rememberMe = false, captcha) {\r\n        return server.post(`auth/login/`,\r\n            {email, password, rememberMe, captcha})\r\n            .then(response => response.data);\r\n    },\r\n    logout() {\r\n        return server.delete(`auth/login/`)\r\n            .then(response => response.data);\r\n    }\r\n}\r\n\r\nexport const securityAPI = {\r\n    getCaptchaUrl() {\r\n        return server.get(`security/get-captcha-url`).then(response => response.data);\r\n    },\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__2OA9t\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"body\":\"Body_body__O9JwV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"Content_content__QlRth\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebar\":\"Sidebar_sidebar__qTWDG\"};"],"sourceRoot":""}